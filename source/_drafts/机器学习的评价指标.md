title: 机器学习的评价指标
author: hero576
tags:
  - algorithm
categories:
  - AI
date: 2020-06-25 19:44:00
---
> 评价指标
<!--more-->

# 混淆矩阵

![混淆矩阵](/images/pasted-103.png)

- 准确率：$accuracy = \frac{TP+TN}{TP+TN+FP+FN}$，评估准不准
- 精度：$precision = \frac{TP}{TP+FP}$
- 查全率：$recall = \frac{TP}{TP+FN}$，评估是否全
- F1：$F1 sorce = \frac{2*Precision*Recall}{Precision+Recall}$

# IoU
- IoU(Intersection over Union)交并比：$IoU=\frac{Area of Overlap}{Area of Union}$，就是识别区域与实际区域，交集比上并集

![IoU](/images/pasted-138.png)

- 准确率：$precision=\frac{Overlap}{detect box}$
- 召回率：$recall=\frac{Overlap}{object box}$

# AP
- AP(average precision)平均精度
- mAP(mean AP)所有样本的平均值

- AP[0.5:0.05]：表示IoU的范围
- AP small：area < 32 <sup>2</sup>px
- AP medium：32<sup>2</sup> < area < 96 <sup>2</sup>px
- AP large：area> 96 <sup>2</sup>px

## 例子
- 图像中一共5个苹果，判断结果置信度由大到小排序，判断了10次预测。
$precision=\frac{TP}{TP+FP}$
$recall=\frac{TP}{TP+FN}$

rank|whether correct|precision|recall
-|-|-|-
1|true|1.0|0.2
2|true|1.0|0.4
3|false|0.67|0.4
4|false|0.5|0.4
5|false|0.4|0.4
6|true|0.5|0.6
7|true|0.57|0.8
8|false|0.5|0.8
9|false|0.44|0.8
10|true|0.5|1.0


- 绘制曲线并做平滑，对某个点平滑时，取后面最大的值。

![精度和召回曲线](/images/pasted-183.png)


$$AP=\frac{1}{11}\times(AP_r(0)+...AP_r(1.0))$$

recall|max
-|-
0|1.0
0.1|1.0
0.2|1.0
0.3|1.0
0.4|1.0
0.5|0.57
0.6|0.57
0.7|0.57
0.8|0.57
0.9|0.5
1.0|0.5

- mAP对每一类求平均




TP FP TPR FPR
AUC
ROC